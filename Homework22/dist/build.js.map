{"version":3,"file":"build.js","mappings":"mBAGA,MAAMA,EAAmBC,SAASC,cAAc,eAC1CC,EAAgBF,SAASC,cAAc,YACvCE,EAAkBH,SAASC,cAAc,cAEzCG,EAAWJ,SAASK,iBAAiB,gBAErCC,EAAmBN,SAASK,iBAAiB,UAAU,GACvDE,EAAgBP,SAASK,iBAAiB,UAAU,GACpDG,EAAkBR,SAASK,iBAAiB,UAAU,GAE5D,IAAII,EAAY,oCACZC,EAAY,qCACZC,EAAe,uCACfC,EAAU,EACVC,EAAU,EACVC,EAAU,EAyBd,SAASC,EAAUC,EAAQC,EAAKC,EAAQC,EAAQC,GAC5CC,MAAMJ,KACDK,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACF,MAAMC,EAxBlB,SAAqBV,EAAQS,EAAME,GAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAKI,QAAQC,OAAQF,IAAK,CAC1C,IAAIG,EAAON,EAAKI,QAAQD,GAAGG,KAC3Bf,EAAOgB,WAAa,GAAGL,MAAQI,SAC/BJ,GAAO,CACX,CAEA,OADAX,EAAOiB,UAAUC,IAAI,QACdP,CACX,CAgB2BQ,CAAYnB,EAAQS,EAAMP,KACzCC,EAAOO,GACP,MAAMU,EAhBlB,SAAoBX,GAChB,OAAkB,OAAdA,EAAKY,MACLC,QAAQC,IAAI,sBAAuBd,EAAKY,MACjCZ,EAAKY,OAEZC,QAAQC,IAAI,0BACL,KAEf,CAQ2BC,CAAWf,GAC1BL,EAAOgB,GACPE,QAAQC,IAAId,EAAI,GAE5B,CAEA,SAASgB,EAAYC,EAAS1B,EAAQ2B,EAAQzB,EAAQC,EAAQC,EAAQwB,GAClE,IAAKF,EAAQzC,cAAc,cAAe,CACtC,MAAM4C,EAAU7C,SAAS8C,cAAc,UACvCD,EAAQE,YAAc,YACtBF,EAAQZ,UAAUC,IAAI,aACtBQ,EAAQM,YAAYH,GAEpBA,EAAQI,iBAAiB,SAAS,KACb,OAAbN,IACA5B,EAAUC,EAAQ2B,EAAQzB,EAAQC,EAAQC,GAE1C8B,MAAMN,EACV,GAER,CACJ,CAEAtC,EAAiB2C,iBAAiB,SAAS,KACvClC,EACIhB,GACA,IAAMU,IACN,IAAMG,IACLuC,GAAMvC,EAAUuC,IAChBC,GAAM3C,EAAY2C,IAGvBX,EACIrC,EAAS,GACTL,GACA,IAAMU,IACN,IAAMG,IACLuC,GAAMvC,EAAUuC,IAChBC,GAAM3C,EAAY2C,GApEZ,2BAsEV,IAGL7C,EAAc0C,iBAAiB,SAAS,KACpClC,EACIb,GACA,IAAMQ,IACN,IAAMG,IACLsC,GAAMtC,EAAUsC,IAChBC,GAAM1C,EAAa0C,IAGxBX,EACIrC,EAAS,GACTF,GACA,IAAMQ,IACN,IAAMG,IACLsC,GAAMtC,EAAUsC,IAChBC,GAAM1C,EAAa0C,GAvFb,yBAyFV,IAGL5C,EAAgByC,iBAAiB,SAAS,KACtClC,EACIZ,GACA,IAAMQ,IACN,IAAMG,IACLqC,GAAMrC,EAAUqC,IAChBC,GAAMzC,EAAgByC,IAG3BX,EACIrC,EAAS,GACTD,GACA,IAAMQ,IACN,IAAMG,IACLqC,GAAMrC,EAAUqC,IAChBC,GAAMzC,EAAgByC,GA1GhB,4BA4GV,G","sources":["webpack://homework22/./js/app.js"],"sourcesContent":["import '../scss/main.scss';\n\n\nconst parentCharacters = document.querySelector('.characters');\nconst parentPlanets = document.querySelector('.planets');\nconst parentTransport = document.querySelector('.transport');\n\nconst wrappers = document.querySelectorAll('.btn_wrapper');\n\nconst charactersButton = document.querySelectorAll('button')[0];\nconst planetsButton = document.querySelectorAll('button')[1];\nconst transportButton = document.querySelectorAll('button')[2];\n\nlet relPeople = `https://www.swapi.tech/api/people`;\nlet relPlanets =`https://www.swapi.tech/api/planets`;\nlet relTransports =`https://www.swapi.tech/api/starships`;\nlet number0 = 1;\nlet number1 = 1;\nlet number2 = 1;\nlet message0 = 'Все персонажи загружены!';\nlet message1 = 'Все планеты загружены!';\nlet message2 = 'Все транспорты загружены!';\n\nfunction displayInfo(parent, data, num) {\n    for (let i = 0; i < data.results.length; i++) {\n        let name = data.results[i].name;\n        parent.innerHTML += `${num}. ${name} <br>`;\n        num += 1;\n    }\n    parent.classList.add('info')\n    return num\n}\n\nfunction getNextRel(data, rel) {\n    if (data.next !== null) {\n        console.log('Следующая страница:', data.next);\n        return data.next;\n    } else {\n        console.log('Достигнут конец списка');\n        return null;\n    }\n}\n\nfunction fetchFull(parent, rel, numRef, setNum, setRel) {\n    fetch(rel())\n        .then(response => response.json())\n        .then(data => {\n            const newNum = displayInfo(parent, data, numRef());\n            setNum(newNum);\n            const newRel = getNextRel(data, rel);\n            setRel(newRel);\n            console.log(data)\n        });\n}\n\nfunction loadMoreBtn(wrapper, parent, getRel, numRef, setNum, setRel, message) {\n    if (!wrapper.querySelector('.load_more')) {\n        const loadBtn = document.createElement('button');\n        loadBtn.textContent = `Load more`;\n        loadBtn.classList.add('load_more');\n        wrapper.appendChild(loadBtn);\n\n        loadBtn.addEventListener('click', () => {\n            if (getRel() !== null) {\n                fetchFull(parent, getRel, numRef, setNum, setRel);\n            } else {\n                alert(message);\n            }\n        });\n    }\n}\n\ncharactersButton.addEventListener('click', () => {\n    fetchFull(\n        parentCharacters,\n        () => relPeople,\n        () => number0,\n        (n) => number0 = n,\n        (r) => relPeople = r\n    );\n\n    loadMoreBtn(\n        wrappers[0],\n        parentCharacters,\n        () => relPeople,\n        () => number0,\n        (n) => number0 = n,\n        (r) => relPeople = r,\n        message0\n    );\n});\n\nplanetsButton.addEventListener('click', () => {\n    fetchFull(\n        parentPlanets,\n        () => relPlanets,\n        () => number1,\n        (n) => number1 = n,\n        (r) => relPlanets = r\n    );\n\n    loadMoreBtn(\n        wrappers[1],\n        parentPlanets,\n        () => relPlanets, \n        () => number1,\n        (n) => number1 = n,\n        (r) => relPlanets = r,\n        message1\n    );\n});\n\ntransportButton.addEventListener('click', () => {\n    fetchFull(\n        parentTransport,\n        () => relTransports,\n        () => number2,\n        (n) => number2 = n,\n        (r) => relTransports = r\n    );\n\n    loadMoreBtn(\n        wrappers[2],\n        parentTransport,\n        () => relTransports, \n        () => number2,\n        (n) => number2 = n,\n        (r) => relTransports = r,\n        message2\n    );\n});"],"names":["parentCharacters","document","querySelector","parentPlanets","parentTransport","wrappers","querySelectorAll","charactersButton","planetsButton","transportButton","relPeople","relPlanets","relTransports","number0","number1","number2","fetchFull","parent","rel","numRef","setNum","setRel","fetch","then","response","json","data","newNum","num","i","results","length","name","innerHTML","classList","add","displayInfo","newRel","next","console","log","getNextRel","loadMoreBtn","wrapper","getRel","message","loadBtn","createElement","textContent","appendChild","addEventListener","alert","n","r"],"sourceRoot":""}